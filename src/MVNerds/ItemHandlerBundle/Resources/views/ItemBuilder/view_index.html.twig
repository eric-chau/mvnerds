{% extends 'MVNerdsLaunchSiteBundle::layout.html.twig' %}

{% block metas %}
	<meta property="og:title" content="MVNerds - Pimp My Recommended Items" />
	<meta property="og:description" content="Liste d'objets recommandÃ©s : {{itemBuild.getName()}}" />
	<meta property="og:type" content="activity" />
	<meta property="og:url" content="http://www.mvnerds.com{{path('pmri_list_detail', {'itemBuildSlug':itemBuild.getSlug()})}}" />
	<meta property="og:image" content="http://www.mvnerds.com/images/news/maj-saison-3-mini.png" />
	<meta property="og:site_name" content="MVNerds" />
	<meta property="fb:admins" content="1317459591" />
{% endblock %}

{% block css %}
	{{ parent() }}

	{% if app.environment != 'dev' %}
		{% stylesheets 
			'css/champion_handler/champion-square36-sprite.css'
			'css/item_builder/item-build-detail.css'
			'css/item_builder/modal.css'
			'css/comment/comment.css'
			'css/jquery.mCustomScrollbar.css'
			output='css/compiled/pmri-view.css'
			filter='yui_css'
		%}
		<link rel="stylesheet" href="{{ asset_url }}" />
		{% endstylesheets %}
	{% else %}
		<link rel="stylesheet" href="{{ asset('css/champion_handler/champion-square36-sprite.css') }}">
		<link href="{{ asset('css/item_builder/item-build-detail.css') }}" rel="stylesheet" type="text/css">
		<link href="{{ asset('css/item_builder/modal.css') }}" rel="stylesheet" type="text/css">
		<link href="{{ asset('css/comment/comment.css') }}" rel="stylesheet" type="text/css">
		<link href="{{ asset('css/jquery.mCustomScrollbar.css') }}" rel="stylesheet" type="text/css">
	{% endif %}
{% endblock %}
	
{% block javascripts %}
	{{ parent() }}
	
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	{% if app.environment != 'dev' %}
		{% javascripts
			
			'js/item_handler/item-modal.js'
			'js/item_handler/item-popover.js'
			'js/launch_site/alerts-ajax-handler.js'
			'js/bootstrap/bootstrap-popover.js'
			'js/item_handler/item_builder/dl-modal.js'
			'js/item_handler/item_builder/view-page.js'
			'js/jquery.mCustomScrollbar.js'
			'js/jquery.mousewheel.min.js'
			output='js/compiled/pmri-view.js'
			filter='yui_js'
		%}
		<script src="{{ asset_url }}"></script>
		{% endjavascripts %}
	{% else %}
		<script src="{{ asset('js/item_handler/item-modal.js') }}"></script>
		<script src="{{ asset('js/item_handler/item-popover.js') }}"></script>
		<script src="{{ asset('js/launch_site/alerts-ajax-handler.js') }}"></script>
		<script src="{{ asset('js/bootstrap/bootstrap-popover.js') }}"></script>
		<script src="{{ asset('js/item_handler/item_builder/dl-modal.js') }}"></script>
		<script src="{{ asset('js/item_handler/item_builder/view-page.js') }}"></script>
		<script src="{{ asset('js/jquery.mCustomScrollbar.js') }}"></script>
		<script src="{{ asset('js/jquery.mousewheel.min.js') }}"></script>
	{% endif %}
		
	<script type="text/javascript">
		var loadMoreCommentRoute = 'item_build_load_more_comment',
			leaveCommentRoute = 'item_build_leave_comment',					
			objectSlug = '{{ itemBuild.getSlug() }}',
			userSlug = '';

		{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
			userSlug = '{{ app.user.getSlug() }}';
		{% endif %}
	</script>
{% endblock %}

{% block title %}
	{{'item_build_view_index.title'|trans}} : {{itemBuild.getName()}}
{% endblock %}
	
{% block body_main_content %}
	<div class="body-container create-item-builder">
		<div class="row-fluid">
			<div class="row-fluid">
				<h1 class="span8">{{'item_build_view_index.h1'|trans}} "{{itemBuild.getName()}}"</h1>
				<div class="generate-button-container span4">
					<a href="#" data-name="{{itemBuild.getName()}}" data-slug="{{itemBuild.getSlug()}}" class="main download-action {%if start_dl is defined and start_dl == 'true'%}start-dl{%endif%}">{{'item_build_view_index.download.btn'|trans}}</a>
					<a href="#" class="copy-action"><p>{{'item_build_view_index.copy.btn'|trans}}</p></a>
				</div>
			</div>
		</div>
		
		<p class="module-name">
			Module <strong>Pimp My Recommended Items</strong> | {{'item_build_view_index.created_by'|trans}} <strong><a href="{{ path('summoner_profile_view', {'userSlug': itemBuild.getUser().getSlug()}) }}" title="Consulter le profil de {{ itemBuild.getUser().getUsername }}"">{{itemBuild.getUser().getUserName()}}</a></strong>
			{% if can_edit %} <div class="generate-button-container"><a href="{{path('pmri_edit', {itemBuildSlug: itemBuild.getSlug()})}}" class="edit-action pull-right"><p>{{ 'item_table.admin.edit'|trans }}</p></a></div>{% endif %}
		</p>
		
		<div class="row-fluid">
			{% if itemBuild.getDescription() != null and itemBuild.getDescription() != '' %}
				<h2>Description</h2>
				
				<p>
					{{ itemBuild.getDescription() }}
				</p>
			{% endif %}
		</div>
		
		<div class="row-fluid">
			
			<div class="span8">
				<h2>{{'item_build_view_index.champions.h2'|trans}}</h2>

				<div class="champion-container">
					<div id="champion-list" class="elements-grid">
						{% include 'MVNerdsItemHandlerBundle:ItemBuilder:view_champion_grid.html.twig' %}
					</div>
				</div>
			</div>

			<div class="span4">
				<h2>{{'item_build_view_index.game_mode.h2'|trans}}</h2>

				<div class="game-mode-container">
					{% set gameMode = itemBuild.getGameMode().getLabel() %}

					{% if gameMode == 'classic' %}
						<div class="game-mode classic" data-game-mode="classic"><span class="message">Summoner Rift</span></div>
					{% elseif gameMode == 'twisted-treeline' %}
						<div class="game-mode twisted-treeline" data-game-mode="twisted-treeline"><span class="message">Twisted Treeline</span></div>
					{% elseif gameMode == 'dominion' %}
						<div class="game-mode dominion" data-game-mode="dominion"><span class="message" >Dominion</span></div>
					{% elseif gameMode == 'aram' %}
						<div class="game-mode proving-grounds" data-game-mode="aram"><span class="message" >All Random All Mid (ARAM)</span></div>
					{% endif %}
				</div>
			</div>
		</div>
		
		<h2>{{'item_build_view_index.items.h2'|trans}}</h2>
		
		{% include 'MVNerdsItemHandlerBundle:ItemBuilder:view_item_blocks.html.twig' %}
		
		<div class="item-build-social-actions">
			<fb:like class="" href="{{url('pmri_list_detail', {'itemBuildSlug':itemBuild.getSlug()})}}" send="false" layout="button_count" width="450" show_faces="true" font="trebuchet ms" data-colorscheme="dark"></fb:like>
			<a href="https://twitter.com/share" class="twitter-share-button" data-text="Pimp My Recommended Items list : {{itemBuild.getName()}}
			{{url('pmri_list_detail', {'itemBuildSlug':itemBuild.getSlug()})}}" data-lang="{{locale}}" data-url="{{url('pmri_list_detail', {'itemBuildSlug':itemBuild.getSlug()})}}"></a>
		</div>
		
		{% render 'MVNerdsCommentBundle:Comment:renderLightComments' with {'object': itemBuild} %}
	</div>
	
	{% include 'MVNerdsItemHandlerBundle:Modal:change_lol_directory_modal.html.twig' %}
	{% include 'MVNerdsItemHandlerBundle:Modal:item_modal.html.twig' %}
{% endblock %}