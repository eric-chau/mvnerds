var guiders=(function(c){var b={};b.version="1.2.8";b._defaultSettings={attachTo:null,autoFocus:false,buttons:[{name:"Close"}],buttonCustomHTML:"",classString:null,closeOnEscape:false,description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",highlight:null,isHashable:true,offset:{top:null,left:null},onClose:null,onHide:null,onShow:null,overlay:false,position:0,title:"Sample title goes here",width:400,xButton:false};b._htmlSkeleton=["<div class='guider'>","  <div class='guider_content'>","    <h1 class='guider_title'></h1>","    <div class='guider_close'></div>","    <p class='guider_description'></p>","    <div class='guider_buttons'>","    </div>","  </div>","  <div class='guider_arrow'>","  </div>","</div>"].join("");b._arrowSize=42;b._backButtonTitle="Back";b._buttonElement="<a></a>";b._buttonAttributes={href:"javascript:void(0);"};b._closeButtonTitle="Close";b._currentGuiderID=null;b._guiders={};b._lastCreatedGuiderID=null;b._nextButtonTitle="Next";b._offsetNameMapping={topLeft:11,top:12,topRight:1,rightTop:2,right:3,rightBottom:4,bottomRight:5,bottom:6,bottomLeft:7,leftBottom:8,left:9,leftTop:10};b._windowHeight=0;b._addButtons=function(j){var k=j.elem.find(".guider_buttons");if(j.buttons===null||j.buttons.length===0){k.remove();return}for(var g=j.buttons.length-1;g>=0;g--){var e=j.buttons[g];var h=c(b._buttonElement,c.extend({"class":"guider_button",html:e.name},b._buttonAttributes,e.html||{}));if(typeof e.classString!=="undefined"&&e.classString!==null){h.addClass(e.classString)}k.append(h);var d=e.name.toLowerCase();if(e.onclick){h.bind("click",e.onclick)}else{switch(d){case b._closeButtonTitle.toLowerCase():h.bind("click",function(){b.hideAll();if(j.onClose){j.onClose(j,false)}});break;case b._nextButtonTitle.toLowerCase():h.bind("click",function(){!j.elem.data("locked")&&b.next()});break;case b._backButtonTitle.toLowerCase():h.bind("click",function(){!j.elem.data("locked")&&b.prev()});break}}}if(j.buttonCustomHTML!==""){var f=c(j.buttonCustomHTML);j.elem.find(".guider_buttons").append(f)}if(j.buttons.length===0){k.remove()}};b._addXButton=function(f){var e=f.elem.find(".guider_close");var d=c("<div></div>",{"class":"x_button",role:"button"});e.append(d);d.click(function(){b.hideAll();if(f.onClose){f.onClose(f,true)}})};b._wireEscape=function(d){c(document).keydown(function(e){if(e.keyCode==27||e.which==27){b.hideAll();if(d.onClose){d.onClose(d,true)}return false}})};b._unWireEscape=function(d){c(document).unbind("keydown")};b._attach=function(q){if(typeof q!=="object"){return}var l=c(q.attachTo);var e=q.elem.innerHeight();var f=q.elem.innerWidth();if(q.position===0||l.length===0){q.elem.css("position","fixed");q.elem.css("top",(c(window).height()-e)/3+"px");q.elem.css("left",(c(window).width()-f)/2+"px");return}var d=l.offset();var o=d.top;var g=d.left;var i=c("body").outerHeight(true)-c("body").outerHeight(false);o-=i;if(b._offsetNameMapping[q.position]){q.position=b._offsetNameMapping[q.position]}var k=l.innerHeight();var p=l.innerWidth();var h=0.9*b._arrowSize;var m={1:[-h-e,p-f],2:[0,h+p],3:[k/2-e/2,h+p],4:[k-e,h+p],5:[h+k,p-f],6:[h+k,p/2-f/2],7:[h+k,0],8:[k-e,-f-h],9:[k/2-e/2,-f-h],10:[0,-f-h],11:[-h-e,0],12:[-h-e,p/2-f/2]};var j=m[q.position];o+=j[0];g+=j[1];var n="absolute";if(l.css("position")=="fixed"){n="fixed";o-=c(window).scrollTop();g-=c(window).scrollLeft()}if(q.offset.top!==null){o+=q.offset.top}if(q.offset.left!==null){g+=q.offset.left}return q.elem.css({position:n,top:o,left:g})};b._guiderById=function(d){if(typeof b._guiders[d]==="undefined"){throw"Cannot find guider with id "+d}return b._guiders[d]};b._showOverlay=function(){c("#guider_overlay").fadeIn("fast",function(){if(this.style.removeAttribute){this.style.removeAttribute("filter")}})};b._highlightElement=function(d){c(d).addClass("guider_highlight")};b._dehighlightElement=function(d){c(d).removeClass("guider_highlight")};b._hideOverlay=function(){c("#guider_overlay").fadeOut("fast")};b._initializeOverlay=function(){if(c("#guider_overlay").length===0){c('<div id="guider_overlay"></div>').hide().appendTo("body")}};b._styleArrow=function(k){var d=k.position||0;if(!d){return}var h=c(k.elem.find(".guider_arrow"));var j={1:"guider_arrow_down",2:"guider_arrow_left",3:"guider_arrow_left",4:"guider_arrow_left",5:"guider_arrow_up",6:"guider_arrow_up",7:"guider_arrow_up",8:"guider_arrow_right",9:"guider_arrow_right",10:"guider_arrow_right",11:"guider_arrow_down",12:"guider_arrow_down"};h.addClass(j[d]);var g=k.elem.innerHeight();var f=k.elem.innerWidth();var e=b._arrowSize/2;var i={1:["right",e],2:["top",e],3:["top",g/2-e],4:["bottom",e],5:["right",e],6:["left",f/2-e],7:["left",e],8:["bottom",e],9:["top",g/2-e],10:["top",e],11:["left",e],12:["left",f/2-e]};var d=i[k.position];h.css(d[0],d[1]+"px")};b._showIfHashed=function(g){var e="guider=";var f=window.location.hash.indexOf(e);if(f!==-1){var d=window.location.hash.substr(f+e.length);if(g.id.toLowerCase()===d.toLowerCase()){b.show(g.id)}}};b.reposition=function(){var d=b._guiders[b._currentGuiderID];b._attach(d)};b.next=function(){var e=b._guiders[b._currentGuiderID];if(typeof e==="undefined"){return}e.elem.data("locked",true);var d=e.next||null;if(d!==null&&d!==""){var g=b._guiderById(d);var f=g.overlay?true:false;b.hideAll(f,true);if(e&&e.highlight){b._dehighlightElement(e.highlight)}b.show(d)}};b.prev=function(){var d=b._guiders[b._currentGuiderID];if(typeof d==="undefined"){return}if(d.prev===null){return}var e=b._guiders[d.prev];e.elem.data("locked",true);var g=e.id||null;if(g!==null&&g!==""){var h=b._guiderById(g);var f=h.overlay?true:false;b.hideAll(f,true);if(e&&e.highlight){b._dehighlightElement(e.highlight)}b.show(g)}};b.createGuider=function(e){if(e===null||e===undefined){e={}}myGuider=c.extend({},b._defaultSettings,e);myGuider.id=myGuider.id||String(Math.floor(Math.random()*1000));var f=c(b._htmlSkeleton);myGuider.elem=f;if(typeof myGuider.classString!=="undefined"&&myGuider.classString!==null){myGuider.elem.addClass(myGuider.classString)}myGuider.elem.css("width",myGuider.width+"px");var d=f.find(".guider_title");d.html(myGuider.title);f.find(".guider_description").html(myGuider.description);b._addButtons(myGuider);if(myGuider.xButton){b._addXButton(myGuider)}f.hide();f.appendTo("body");f.attr("id",myGuider.id);if(typeof myGuider.attachTo!=="undefined"&&myGuider!==null){b._attach(myGuider)&&b._styleArrow(myGuider)}b._initializeOverlay();b._guiders[myGuider.id]=myGuider;if(b._lastCreatedGuiderID!=null){myGuider.prev=b._lastCreatedGuiderID}b._lastCreatedGuiderID=myGuider.id;if(myGuider.isHashable){b._showIfHashed(myGuider)}return b};b.hideAll=function(f,e){e=e||false;c(".guider:visible").each(function(g,h){var i=b._guiderById(c(h).attr("id"));if(i.onHide){i.onHide(i,e)}});c(".guider").fadeOut("fast");var d=b._guiders[b._currentGuiderID];if(d&&d.highlight){b._dehighlightElement(d.highlight)}if(typeof f!=="undefined"&&f===true){}else{b._hideOverlay()}return b};b.show=function(k){if(!k&&b._lastCreatedGuiderID){k=b._lastCreatedGuiderID}var h=b._guiderById(k);if(h.overlay){b._showOverlay();if(h.highlight){b._highlightElement(h.highlight)}}if(h.closeOnEscape){b._wireEscape(h)}else{b._unWireEscape(h)}if(h.onShow){h.onShow(h)}b._attach(h);h.elem.fadeIn("fast").data("locked",false);b._currentGuiderID=k;var j=b._windowHeight=c(window).height();var e=c(window).scrollTop();var d=h.elem.offset();var f=h.elem.height();var g=(e+j<d.top+f);var i=(d.top<e);if(h.autoFocus&&(g||i)){setTimeout(b.scrollToCurrent,10)}c(h.elem).trigger("guiders.show");return b};b.scrollToCurrent=function(){var e=b._guiders[b._currentGuiderID];if(typeof e==="undefined"){return}var i=b._windowHeight;var f=c(window).scrollTop();var d=e.elem.offset();var h=e.elem.height();var g=Math.round(Math.max(d.top+(h/2)-(i/2),0));window.scrollTo(0,g)};var a=undefined;c(window).resize(function(){if(typeof(a)!=="undefined"){clearTimeout(a)}a=setTimeout(function(){a=undefined;if(typeof(b)!=="undefined"){b.reposition()}},20)});return b}).call(this,jQuery);