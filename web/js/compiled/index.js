var $win=$(window),$actionBar=$("div.actions-bar"),actionBarTop=$actionBar.length&&$actionBar.offset().top,isFixed=0,$benchmarkChampion,benchmarkChampionTop,isBenchmarkChampionFixed;function initBenchmark(){$benchmarkChampion=$("div#compare-champion-div-header"),benchmarkChampionTop=$benchmarkChampion.length&&$benchmarkChampion.offset().top,isBenchmarkChampionFixed=0;processScroll()}function processScroll(){var a=$win.scrollTop();if(a>=actionBarTop-9.85&&!isFixed){isFixed=1;$actionBar.addClass("active");$actionBar.parent(".champions-handler-container").addClass("active");$benchmarkChampion.addClass("active");$benchmarkChampion.parent("#champion-comparator").addClass("active")}else{if(a<=actionBarTop-9.85&&isFixed){isFixed=0;$actionBar.removeClass("active");$actionBar.parent(".champions-handler-container").removeClass("active");$benchmarkChampion.removeClass("active");$benchmarkChampion.parent("#champion-comparator").removeClass("active")}}}$(document).ready(function(){$("#wrapper").on("mouseover",".tooltip-anchor",function(){$(this).tooltip("show")});var a=new Date(2012,10,5,12,0,0);var g=$("div.days"),f=$("div.hours"),e=$("div.minutes"),c=$("div.seconds");b();function b(){var i=new Date();var m=(a.getTime()-i.getTime())/1000-(i.getTimezoneOffset()*60);var l=Math.floor(m/86400);g.html("<strong>"+l+"</strong> jour"+(l>1?"s":""));m-=l*86400;var h=Math.floor(m/3600);f.html("<strong>"+h+"</strong> heure"+(h>1?"s":""));m-=h*3600;var j=Math.floor(m/60);e.html("<strong>"+j+"</strong> minute"+(j>1?"s":""));var k=Math.floor(m-j*60);c.html("<strong>"+k+"</strong> seconde"+(k>1?"s":""));setTimeout(b,1000)}$("div.presentation-container div.link").on("click",function(){var h=$(this);$("div.presentation-container div.content div."+h.data("content-name")).slideToggle(300,function(){actionBarTop=$actionBar.length&&$actionBar.offset().top;benchmarkChampionTop=$benchmarkChampion.length&&$benchmarkChampion.offset().top;processScroll()})});if(getItemFromLS("already-leave-email")=="true"){$("div.presentation-container div.content div.registration").hide();actionBarTop=$actionBar.length&&$actionBar.offset().top;if($benchmarkChampion!=undefined){benchmarkChampionTop=$benchmarkChampion.length&&$benchmarkChampion.offset().top}processScroll()}var d=$("div#leave-email-form-container");d.on("click","a.submit-btn",function(h){h.preventDefault();if($(this).hasClass("disabled")){return false}else{if($submitBtnLabel.html()==$submitBtnLabel.data("submit-label")){$form.submit()}}});d.on("keypress",'input[type="email"]#user_email',function(h){var i=$(this);if(h.which==13){h.preventDefault();if($submitBtnLabel.html()==$submitBtnLabel.data("submit-label")){$form.submit()}}});d.on("keyup",'input[type="email"]#user_email',function(h){h.preventDefault();if(h.which==13||(h.which>=37&&h.which<=40)){return false}var i=$(this);if($.trim(i.val())!=""){if(validateEmail(i.val())){$loaderImg.show();$submitBtnLabel.html($submitBtnLabel.data("checking-label"));$.ajax({url:Routing.generate("launch_site_check_email"),data:{email_to_check:i.val()},type:"POST",dataType:"json",success:function(j){$loaderImg.hide();if(j){$submitFormButton.addClass("disabled");$submitBtnLabel.html($submitBtnLabel.data("used-email-label"));i.focus()}else{$submitBtnLabel.html($submitBtnLabel.data("submit-label"));$submitFormButton.removeClass("disabled")}}})}else{$submitBtnLabel.html($submitBtnLabel.data("check-label"));$submitFormButton.addClass("disabled")}}});d.on("submit","form#leave-email-form",function(h){h.preventDefault();$(this).ajaxSubmit({target:"div#leave-email-form-container",success:function(i){$("div#leave-email-form-container").on("hide","div#leave-email-success-modal",function(){$("div.presentation-container div.content div.registration").slideToggle()});saveItemInLS("already-leave-email",true)}})});initBenchmark();processScroll();$win.on("scroll",processScroll);$(".dropdown-toggle").dropdown()});
var $btnCompare=$("a#btn-compare"),$searchInputText=$('input[type="text"]#filter-value'),$btnComparisonList=$("a#drop-comparison-list"),$btnHelp=$("li.help-action"),$btnFilter=$("a#drop-filter-list"),isFirstActionAfterGT=false;var ctrlDown=false,ctrlKey=17,escapeKey=27,compareShortcut=67,listShortcut=76,filterShortcut=70,searchShortcut,guideShortcut;if(locale=="fr"){searchShortcut=82;guideShortcut=86}else{searchShortcut=83;guideShortcut=71}$(document).ready(function(){$(document).keydown(function(a){if(a.which==ctrlKey){ctrlDown=true}}).keyup(function(a){if(a.which==ctrlKey){ctrlDown=false}});$("body").bind("keyup",function(a){shortcutListener(a)});$('input[type="email"]#user_email, input[type="text"]#filter-value').on("focus",function(){$("body").unbind("keyup");$searchInputText.bind("keyup",function(a){if(a.which==escapeKey){$(this).blur()}})});$('input[type="email"]#user_email, input[type="text"]#filter-value').on("blur",function(){$("body").bind("keyup",function(a){shortcutListener(a)})})});function shortcutListener(a){if(isFirstActionAfterGT){isFirstActionAfterGT=false;return false}if(ctrlDown){return false}switch(a.which){case compareShortcut:if($btnCompare.hasClass("disabled")){return false}$btnCompare.trigger("click");break;case searchShortcut:$(".dropdown.open .dropdown-toggle").dropdown("toggle");$searchInputText[0].selectionStart=$searchInputText[0].selectionEnd=$searchInputText.val().length;break;case listShortcut:$btnComparisonList.trigger("click");break;case filterShortcut:$btnFilter.trigger("click");break;case guideShortcut:$(".dropdown.open .dropdown-toggle").dropdown("toggle");$btnHelp.trigger("click");default:break}};
var SUCCESS_ALERT="success";var ERROR_ALERT="error";var timeoutID;function getAlertMessage(a){$.ajax({type:"GET",url:Routing.generate("champion_handler_comparison_get_"+a+"_message"),dataType:"text"}).done(function(b){if(b!=undefined&&b!=""){displayMessage(b,a)}})}function displayMessage(b,a){var c='<div class="fade in hide alert alert-fixed alert-'+a+'"><button type="button" class="close" data-dismiss="alert">Ã—</button>'+b+"</div>";$("#champion-comparison").before(c);$(".alert-fixed").show(400);timeoutID=setTimeout(function(){hideMessages()},3000)}function hideMessages(){clearTimeout(timeoutID);$("div.container div.alert-fixed").animate({opacity:0.25,bottom:"+=100"},800,function(){$(this).remove()})};
jQuery(function(){var c=$("#champion-comparison"),d=[],e=0;function a(f){c.html(f);for(i=0;i<e;i++){d[i].removeClass("force-hide")}d=[];e=0;initBenchmark()}$("#wrapper").on("click",".data-pagination:not(.disabled)",function(){var g=$(this);$("div.actions-bar ul.action-buttons li.action").each(function(){if($(this).data("page-display")==g.data("page-display")){d[e++]=$(this)}else{$(this).addClass("force-hide")}});var f=this.href;var h=this.rel=="next"?"-150%":"150%";if(Modernizr.history){history.pushState(location.pathname,"",f)}c.find("div.data-scrollable").animate({left:h,opacity:0.5},"slow",function(){c.addClass("loading");$.get(f,{format:"html"},function(j){c.removeClass("loading");a(j)},"html")});return false});var b=location.pathname;$(window).bind("popstate",function(){if(location.pathname==b){b=null;return}c.find("div.data-scrollable").hide();c.addClass("loading");$.get(location.pathname,{format:"html"},function(f){c.removeClass("loading");a(f)},"html")})});
var SORT_DESC="desc",SORT_ASC="asc";var $championComparator=$("#champion-comparison"),$championHeader,$championList;function sortByColumn(e,a){var b,f,c,d=new Array();$championHeader=$("#champion-comparator div#compare-champion-div-header div.table-header");$championList=$("#champion-comparator div.champion-list");a=typeof a!=="undefined"?a:SORT_DESC;$('div[data-sort="'+e+'"]').each(function(){b=$(this).data("value");f=$(this).parent("div.champion-row").data("slug");d.push({slug:f,value:b,dom:$(this).parent("div.champion-row")})});d.sort(function(h,g){return(e=="champion-name")?(h.value.localeCompare(g.value)):(parseFloat(h.value)-parseFloat(g.value))});c=$championHeader.find('div[data-target="'+e+'"]');$championHeader.find("div.sort").removeClass("sort-desc sort-asc");$championHeader.find("div.sort i").attr("class","icon-sort icon-white");if(a==SORT_DESC){d.reverse();c.addClass("sort-desc");c.find("i").attr("class","icon-sort-down icon-white")}else{c.addClass("sort-asc");c.find("i").attr("class","icon-sort-up icon-white")}$championList.html("");$.each(d,function(g,h){$championList.append(h.dom)})}jQuery(function(){$championComparator.on("click","div#compare-champion-div-header div.table-header div.sort:not(.sort-asc):not(.sort-desc)",function(){console.log("sort");$(this).find("i").removeClass("icon-sort");sortByColumn($(this).data("target"))});$championComparator.on("click","div#compare-champion-div-header div.table-header div.sort.sort-asc",function(){sortByColumn($(this).data("target"),SORT_DESC)});$championComparator.on("click","div#compare-champion-div-header div.table-header div.sort.sort-desc",function(){sortByColumn($(this).data("target"),SORT_ASC)})});